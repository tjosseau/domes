/**
 * Domes library
 *
 * @author      Thomas Josseau
 * @version     0.0.5
 * @date        2014.07.07
 * @link        https://github.com/tjosseau/domes
 *
 * @description
 *      Tiny DOM elements manager.
 */
void function(m){var f,k="undefined"!==typeof m.Node,l=function(a,b){for(var c in b)b.propertyIsEnumerable(c)&&(a[c]=b[c]);return a},n=function(a){for(var b={},c=a.length;c--;)b[a[c].name]=a[c].value;return b},h="classList"in document.createElement("div")?function(a,b,c){switch(b){case "a":return a.classList.add(c);case "r":return a.classList.remove(c);case "t":return a.classList.toggle(c);case "c":return a.classList.contains(c)}}:function(a,b,c){switch(b){case "a":h(a,"c",c)||(a.className+=" "+c); break;case "r":a.className=a.className.replace(new RegExp("(^|\\s)"+c+"(\\s|$)")," ").replace(/\s$/,"");break;case "t":h(a,"c",c)?h(a,"a",c):h(a,"r",c);break;case "c":return-1!==(" "+a.className+" ").indexOf(" "+c+" ")}},p=function(a,b){var c=document.querySelectorAll(b),d=c.length;for(a.length=d;d--;)a[d]=c[d];a.query=b;return a},g=function(){l(this,{length:0,query:"",events:[]})};l(g,{prototype:{add:function(a){a&&1===a.nodeType&&!this.contains(a)&&(this[this.length++]=a);return this},trim:function(){if(arguments.length){var a, b=this.length,c=f.create().merge(arguments),d,g=c.length;for(a=0;a<b;a++)for(d=0;d<g;d++)if(this[a]===c[d]){delete this[a];break}for(a=0;a<d;a++)this[a]||(a!==d-1&&(this[a]=this[a+1]),this.length--)}else for(;this.length;)delete this[--this.length];return this},remove:function(){for(var a,b=this.length;b--;)(a=this[b]).parentNode&&a.parentNode.removeChild(a);return this},update:function(){this.empty();this.query&&p(this,this.query);return this},merge:function(a){for(var b=-1,c,d;d=arguments[++b];)if(d instanceof g)for(d=d.length,c=0;c<d;)this.add(arguments[b][c++]);else if(-1<d.length)for(d=d.length,c=0;c<d;)this.merge(arguments[b][c++]);else this.add(arguments[b]);return this},get:function(a){return f.create().add(this[a])},contains:function(a){for(var b=this.length;b--;)if(a===this[b])return!0;return!1},first:function(){return this.get(0)},last:function(){return this.get(this.length-1)},element:function(){return this[0]},elements:function(){for(var a=[],b=0;b<this.length;)a.push(this[b++]);return a},parent:function(){for(var a= f.create(),b=0;b<this.length;)a.add(this[b++].parentNode);return a},children:function(){for(var a=f.create(),b,c,d=-1;++d<this.length;)for(b=-1,c=this[d].childNodes.length;b++<c;)a.add(this[d].childNodes[b]);return a},next:k?function(){for(var a=f.create(),b=-1;++b<this.length;)a.add(this[b].nextElementSibling);return a}:function(){for(var a=f.create(),b,c=-1;++c<this.length;){b=this[c];do b=b.nextSibling;while(b&&1!==b.nodeType);a.add(b)}return a},previous:k?function(){for(var a=f.create(),b=-1;++b< this.length;)a.add(this[b].previousElementSibling);return a}:function(){for(var a=f.create(),b,c=-1;++c<this.length;){b=this[c];do b=b.previousSibling;while(b&&1!==b.nodeType);a.add(b)}return a},type:function(){if(!this.length)return"";for(var a=this.length,b,c;a--;){b=this[a];if(c&&b.tagName!==c)return"*";c=b.tagName}return c.toLowerCase()},outer:function(a){var b=-1;if(null==e||!0===a){if(!this.length)return null;for(var c=[];++b<this.length;)c.push(this[b].outerHTML);return!0===a?c:c.join("")}if("string"=== typeof a)for(;++b<this.length;)this[b].outerHTML=a;else if(1===a.nodeType)for(;++b<this.length;)this[b].outerHTML=a.outerHTML;else if(a instanceof g)for(;++b<this.length;)this[b].outerHTML=a.outer();else for(;++b<this.length;)this[b].outerHTML=a.toString();return this},inner:function(a){var b=-1;if(null==a||!0===a){if(!this.length)return null;for(var c=[];++b<this.length;)c.push(this[b].innerHTML);return!0===a?c:c.join("")}if("string"===typeof a)for(;++b<this.length;)this[b].innerHTML=a;else if(1=== a.nodeType)for(;++b<this.length;)this[b].innerHTML=a.outerHTML;else if(a instanceof g)for(;++b<this.length;)this[b].innerHTML=a.outer();else for(;++b<this.length;)this[b].innerHTML=a.toString();return this},empty:function(){this.inner("");return this},append:function(a){var b=-1;if("string"===typeof a)for(;++b<this.length;)this[b].insertAdjacentHTML("beforeend",a);else if(1===a.nodeType)this[this.length-1].appendChild(a);else if(a instanceof g)for(var b=this[this.length-1],c=-1;++c<a.length;)b.appendChild(a[c]); return this},appendTo:function(a){f(a).append(this);return this},prepend:function(a){var b=-1;if("string"===typeof a)for(;++b<this.length;)this[b].insertAdjacentHTML("afterbegin",a);else{var c=this[this.length-1];if(1===a.nodeType)c.insertBefore(a,c.firstChild);else if(a instanceof g&&(b=a.length))for(;b--;)c.insertBefore(a[b],c.firstChild)}return this},prependTo:function(a){f(a).prepend(this);return this},before:function(a){var b=-1;if("string"===typeof a)for(;++b<this.length;)this[b].insertAdjacentHTML("beforebegin", a);else{var c=this[this.length-1];if(1===a.nodeType)c.parentNode.insertBefore(a,c);else if(a instanceof g&&(b=a.length))for(;b--;)c.parentNode.insertBefore(a[b],c)}return this},after:function(a){var b=-1;if("string"===typeof a)for(;++b<this.length;)this[b].insertAdjacentHTML("afterend",a);else{var c=this[this.length-1];if(1===a.nodeType)c.parentNode.insertBefore(a,c.nextSibling);else if(a instanceof g&&(b=a.length))for(;b--;)c.parentNode.insertBefore(a[b],c.nextSibling)}return this},text:function(a){var b= -1;if("string"===typeof a)for(;++b<this.length;)this[b].innerText=a;else{if(!this.length)return null;for(var c=[];++b<this.length;)c.push(this[b].innerText);return!0===a?c:c.join("")}return this},attr:function(a,b){var c=-1;if(a){if(!0===a){for(var d=[];++c<this.length;)d.push(n(this[c].attributes));return d}if("string"===typeof a){if(void 0===b)return this.length?this[0].getAttribute(a):null;for(;++c<this.length;)null!==b?this[c].setAttribute(a,b):this[c].removeAttribute(a)}else if("object"===typeof a)for(;++c< this.length;)for(d in a)null!==a[d]?this[c].setAttribute(d,a[d]):this[c].removeAttribute(d)}else return this.length?n(this[0].attributes):null;return this},id:function(a){if(a){if(!0===a){a=-1;for(var b=[];++a<this.length;)b.push(this[a].getAttribute("id"));return b}this.length&&this[0].setAttribute("id",a.toString())}else return this.length?this[0].getAttribute("id"):null;return this},cl:function(a,b){var c=-1;if(a){if(!0===a){for(var d=[];++c<this.length;)d.push(this[c].getAttribute("class"));return d}if("string"=== typeof a){if(null==b)return this.length?h(this[0],"c",a):null;if(!0===b)for(;++c<this.length;)h(this[c],"a",a);else if(!1===b)for(;++c<this.length;)h(this[c],"r",a);else if("toggle"===b)for(;++c<this.length;)h(this[c],"t",a)}else if("object"===typeof a)for(d in a)this.cl(d,a[d]);else this.length&&this[0].setAttribute("id",b.toString())}else return this.length?this[0].getAttribute("class"):null;return this},style:function(a,b){var c=-1;if(a){if(!0===a){for(var d=[];++c<this.length;)d.push(this[c].getAttribute("class")); return d}if("string"===typeof a){if(void 0===b)return this.length?this[0].style[a]:null;for(;++c<this.length;)this[c].style[a]=null!==b?b:""}else if("object"===typeof a)for(;++c<this.length;)for(d in a)this[c].style[d]=null!==a[d]?a[d]:""}else return this.length?this[0].getAttribute("class"):null;return this},on:k?function(a,b){for(var c=this.length;c--;)this[c].addEventListener(a,b,!1);this.events[a]=b;return this}:function(a,b){for(var c=this.length,d=function(){var a=window.event;return b.call(this, l(a,{target:a.srcElement||document,currentTarget:this,preventDefault:function(){a.returnValue=!1},stopPropagation:function(){a.cancelBubble=!0}}))};c--;)this[c].attachEvent("on"+a,d);this.events[a]=d;return this},off:k?function(a,b){for(var c=this.length;c--;)this[c].removeEventListener(a,b||this.events[a],!1);delete this.events[a];return this}:function(a,b){for(var c=this.length;c--;)this[c].detachEvent("on"+a,b||this.events[a]);delete this.events[a];return this},focus:function(){for(var a=this.length;a--;)this[a].focus(); return this},blur:function(){for(var a=this.length;a--;)this[a].blur();return this},bounds:function(a){if(this.length){if(!0===a){a=0;for(var b=this.length,c=[];a++<b;)c.push(this[a].getBoundingClientRect());return c}if(!1===a){a=this.length-1;for(var c=this[a].getBoundingClientRect(),d=c.top,f=c.right,g=c.bottom,b=c.left;a--;)c=this[a].getBoundingClientRect(),c.top<d&&(d=c.top),c.right>f&&(f=c.right),c.bottom>g&&(g=c.bottom),c.left<b&&(b=c.left);return l(c,{top:d,right:f,bottom:g,left:b,width:f- b,height:g-d})}return this[0].getBoundingClientRect()}return null}}});f=m.domes=function(a){return"string"===typeof a?f.query.apply(f,arguments):f.gather.apply(f,arguments)};l(f,{fn:g.prototype,create:function(a,b){var c=new g;if(a)if(b)c.add(document.createElementNS(b,a));else switch(a){case "svg":c.add(document.createElementNS("http://www.w3.org/2000/svg",a));break;default:c.add(document.createElement(a))}return c},gather:function(){return(new g).merge(arguments)},query:function(a){return p(new g, a)},ready:function(a){k?document.addEventListener("DOMContentLoaded",function(){a()},!1):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&a()})}})}(window);
