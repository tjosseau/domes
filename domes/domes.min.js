/**
 * Domes library
 *
 * @author      Thomas Josseau
 * @version     0.0.7
 * @date        2014.07.07
 * @link        https://github.com/tjosseau/domes
 *
 * @description
 *      Tiny DOM elements manager.
 */
void function(m){var g,k="undefined"!==typeof m.Node,l=function(a,c){for(var b in c)c.propertyIsEnumerable(b)&&(a[b]=c[b]);return a},n=function(a){for(var c={},b=a.length;b--;)c[a[b].name]=a[b].value;return c},h="classList"in document.createElement("div")?function(a,c,b){switch(c){case "a":return a.classList.add(b);case "r":return a.classList.remove(b);case "t":return a.classList.toggle(b);case "c":return a.classList.contains(b)}}:function(a,c,b){switch(c){case "a":h(a,"c",b)||(a.className+=" "+b); break;case "r":a.className=a.className.replace(new RegExp("(^|\\s)"+b+"(\\s|$)")," ").replace(/\s$/,"");break;case "t":h(a,"c",b)?h(a,"a",b):h(a,"r",b);break;case "c":return-1!==(" "+a.className+" ").indexOf(" "+b+" ")}},p=function(a,c,b){a=a.querySelectorAll(b);b=a.length;for(c.length=b;b--;)c[b]=a[b];return c},f=function(){l(this,{length:0,events:[]})};l(f,{prototype:{add:function(a){a&&1===a.nodeType&&!this.contains(a)&&(this[this.length++]=a);return this},trim:function(){if(arguments.length){var a, c=this.length,b=(new f).merge(arguments),d,e=b.length;for(a=0;a<c;a++)for(d=0;d<e;d++)if(this[a]===b[d]){delete this[a];break}for(a=0;a<d;a++)this[a]||(a!==d-1&&(this[a]=this[a+1]),this.length--)}else for(;this.length--;)delete this[this.length];return this},remove:function(){for(var a,c=this.length;c--;)(a=this[c]).parentNode&&a.parentNode.removeChild(a);return this},merge:function(){for(var a=-1,c,b;c=arguments[++a];)if(c instanceof f)for(c=c.length-1,b=-1;b++<c;)this.add(arguments[a][b]);else if(-1< c.length)for(c=c.length-1,b=-1;b++<c;)this.merge(arguments[a][b]);else this.add(c);return this},get:function(a){return(new f).add(this[a])},contains:function(a){for(var c=this.length;c--;)if(a===this[c])return!0;return!1},first:function(){return this.get(0)},last:function(){return this.get(this.length-1)},element:function(){return this[0]},elements:function(){for(var a=[],c=this.length-1,b=-1;b++<c;)a.push(this[b]);return a},each:function(a){for(var c=this.length-1,b=-1;b++<c;)a.call(this[b],this[b], b);return this},parent:function(){for(var a=new f,c=this.length-1,b=-1;b++<c;)a.add(this[echo(b)].parentNode);return a},children:function(){for(var a=new f,c=this.length-1,b,d,e,g=-1;g++<c;)for(e=this[g],b=-1,d=e.childNodes.length;b++<d;)a.add(e.childNodes[b]);return a},next:k?function(){for(var a=new f,c=this.length-1,b=-1;b++<c;)a.add(this[b].nextElementSibling);return a}:function(){for(var a=new f,c=this.length-1,b,d=-1;d++<c;){b=this[d];do b=b.nextSibling;while(b&&1!==b.nodeType);a.add(b)}return a}, previous:k?function(){for(var a=new f,c=this.length-1,b=-1;b++<c;)a.add(this[b].previousElementSibling);return a}:function(){for(var a=new f,c=this.length-1,b,d=-1;d++<c;){b=this[d];do b=b.previousSibling;while(b&&1!==b.nodeType);a.add(b)}return a},query:function(a){for(var c=new f,b=this.length-1,d=-1;d++<b;)p(this[d],c,a);return c},type:function(){if(!this.length)return"";for(var a=this.length,c,b;a--;){c=this[a];if(b&&c.tagName!==b)return"*";b=c.tagName}return b.toLowerCase()},outer:function(a){var c= this.length-1,b=-1;if(null==a||!0===a){if(-1===c)return null;for(var d=[];b++<c;)d.push(this[b].outerHTML);return!0===a?d:d.join("")}if("string"===typeof a)for(;b++<c;)this[b].outerHTML=a;else if(1===a.nodeType)for(;b++<c;)this[b].outerHTML=a.outerHTML;else if(a instanceof f)for(;b++<c;)this[b].outerHTML=a.outer();else for(;b++<c;)this[b].outerHTML=a.toString();return this},inner:function(a){var c=this.length-1,b=-1;if(null==a||!0===a){if(-1===c)return null;for(var d=[];b++<c;)d.push(this[b].innerHTML); return!0===a?d:d.join("")}if("string"===typeof a)for(;b++<c;)this[b].innerHTML=a;else if(1===a.nodeType)for(;b++<c;)this[b].innerHTML=a.outerHTML;else if(a instanceof f)for(;b++<c;)this[b].innerHTML=a.outer();else for(;b++<c;)this[b].innerHTML=a.toString();return this},empty:function(){this.inner("");return this},append:function(a){var c=this.length-1,b=-1;if("string"===typeof a)for(;b++<c;)this[b].insertAdjacentHTML("beforeend",a);else{var d=this[c];if(1===a.nodeType)d.appendChild(a);else if(a instanceof f)for(c=a.length-1;b++<c;)d.appendChild(a[b])}return this},appendTo:function(a){g(a).append(this);return this},prepend:function(a){var c=this.length-1,b=-1;if("string"===typeof a)for(;b++<c;)this[b].insertAdjacentHTML("afterbegin",a);else if(c=this[c],1===a.nodeType)c.insertBefore(a,c.firstChild);else if(a instanceof f)for(b=a.length;b--;)c.insertBefore(a[b],c.firstChild);return this},prependTo:function(a){g(a).prepend(this);return this},before:function(a){var c=this.length-1,b=-1;if("string"===typeof a)for(;b++< c;)this[b].insertAdjacentHTML("beforebegin",a);else if(c=this[c],1===a.nodeType)c.parentNode.insertBefore(a,c);else if(a instanceof f)for(b=a.length;b--;)c.parentNode.insertBefore(a[b],c);return this},after:function(a){var c=this.length-1,b=-1;if("string"===typeof a)for(;b++<c;)this[b].insertAdjacentHTML("afterend",a);else if(c=this[c],1===a.nodeType)c.parentNode.insertBefore(a,c.nextSibling);else if(a instanceof f)for(b=a.length;b--;)c.parentNode.insertBefore(a[b],c.nextSibling);return this},text:function(a){var c= this.length-1,b=-1;if("string"===typeof a)for(;b++<c;)this[b].innerText=a;else{if(-1===c)return null;for(var d=[];b++<c;)d.push(this[b].innerText);return!0===a?d:d.join("")}return this},attr:function(a,c){var b=this.length-1,d=-1;if(a){if(!0===a){for(var e=[];d++<b;)e.push(n(this[d].attributes));return e}if("string"===typeof a){if(void 0===c)return-1<b?this[0].getAttribute(a):null;if(null===c)for(;d++<b;)this[d].removeAttribute(a);else for(;d++<b;)this[d].setAttribute(a,c)}else if("object"===typeof a)for(;d++< b;)for(e in a)null===a[e]?this[d].removeAttribute(e):this[d].setAttribute(e,a[e])}else return-1<b?n(this[0].attributes):null;return this},id:function(a){if(!a)return this.length?this[0].getAttribute("id"):null;if(!0===a){a=-1;for(var c=this.length-1,b=[];a++<c;)b.push(this[a].getAttribute("id"));return b}this.length&&this[0].setAttribute("id",a.toString());return this},cl:function(a,c){if(!a)return this.length?this[0].getAttribute("class"):null;var b=this.length-1,d=-1;if(!0===a){for(var e=[];d++< b;)e.push(this[d].getAttribute("class"));return e}if("string"===typeof a){if(null==c)return this.length?h(this[0],"c",a):null;if(!0===c)for(;d++<b;)h(this[d],"a",a);else if(!1===c)for(;d++<b;)h(this[d],"r",a);else if("toggle"===c)for(;d++<b;)h(this[d],"t",a)}else if("object"===typeof a)for(e in a)this.cl(e,a[e]);return this},style:function(a,c){if(!a)return this.length?this[0].getAttribute("style"):null;var b=this.length-1,d=-1;if(!0===a){for(var e=[];d++<b;)e.push(this[d].getAttribute("style")); return e}if("string"===typeof a){if(void 0===c)return-1<b?this[0].style[a]:null;if(null===c)for(;d++<b;)this[d].style[a]="";else for(;d++<b;)this[d].style[a]=c}else if("object"===typeof a)for(;d++<b;)for(e in a)this[d].style[e]=null===a[e]?"":a[e];return this},on:k?function(a,c){for(var b=this.length;b--;)this[b].addEventListener(a,c,!1);this.events[a]=c;return this}:function(a,c){for(var b=this.length,d=function(){var a=window.event;return c.call(this,l(a,{target:a.srcElement||document,currentTarget:this, preventDefault:function(){a.returnValue=!1},stopPropagation:function(){a.cancelBubble=!0}}))};b--;)this[b].attachEvent("on"+a,d);this.events[a]=d;return this},off:k?function(a,c){for(var b=this.length;b--;)this[b].removeEventListener(a,c||this.events[a],!1);delete this.events[a];return this}:function(a,c){for(var b=this.length;b--;)this[b].detachEvent("on"+a,c||this.events[a]);delete this.events[a];return this},focus:function(){for(var a=this.length;a--;)this[a].focus();return this},blur:function(){for(var a= this.length;a--;)this[a].blur();return this},bounds:function(a){if(!this.length)return null;var c=this.length-1;if(!0===a){for(var b=-1,d=[];b++<c;)a=this[b].getBoundingClientRect(),k?d.push(a):d.push({top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.right-a.left,height:a.bottom-a.top});return d}if(!1===a){a=this[c].getBoundingClientRect();for(var b=a.top,d=a.right,e=a.bottom,c=a.left;c--;)a=this[c].getBoundingClientRect(),a.top<b&&(b=a.top),a.right>d&&(d=a.right),a.bottom>e&&(e=a.bottom), a.left<c&&(c=a.left);return{top:b,right:d,bottom:e,left:c,width:d-c,height:e-b}}a=this[0].getBoundingClientRect();return k?a:{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.right-a.left,height:a.bottom-a.top}}}});g=m.domes=function(a){return"string"===typeof a?g.query.apply(g,arguments):g.gather.apply(g,arguments)};l(g,{fn:f.prototype,create:function(a,c){var b=new f;if(a)if(c)b.add(document.createElementNS(c,a));else switch(a){case "svg":b.add(document.createElementNS("http://www.w3.org/2000/svg", a));break;default:b.add(document.createElement(a))}return b},gather:function(){return(new f).merge(arguments)},query:function(a){return p(document,new f,a)},ready:function(a){k?document.addEventListener("DOMContentLoaded",function(){a()},!1):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&a()})}})}(window);
