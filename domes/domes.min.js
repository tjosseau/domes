/**
 * Domes library
 *
 * @author      Thomas Josseau
 * @version     0.0.9
 * @date        2014.07.30
 * @link        https://github.com/tjosseau/domes
 *
 * @description
 *      Tiny DOM elements manager.
 */
void function(a){"use strict";var b,c="undefined"!=typeof a.Node,d="classList"in document.createElement("div"),e=1,f=function(a,b){for(var c in b)b.propertyIsEnumerable(c)&&(a[c]=b[c]);return a},g=function(a){for(var b={},c=a.length;c--;)b[a[c].name]=a[c].value;return b},h=d?function(a,b,c){switch(b){case"a":return a.classList.add(c);case"r":return a.classList.remove(c);case"t":return a.classList.toggle(c);case"c":return a.classList.contains(c)}}:function(a,b,c){switch(b){case"a":h(a,"c",c)||(a.className+=" "+c);break;case"r":a.className=a.className.replace(new RegExp("(^|\\s)"+c+"(\\s|$)")," ").replace(/\s$/,"");break;case"t":h(a,"c",c)?h(a,"a",c):h(a,"r",c);break;case"c":return-1!==(" "+a.className+" ").indexOf(" "+c+" ")}},i=function(a,b,c){var d=a.querySelectorAll(c),e=d.length;for(b.length=e;e--;)b[e]=d[e];return b},j=function(){f(this,{length:0,events:[]})};f(j,{prototype:{add:function(a){return a&&a.nodeType===e&&!this.contains(a)&&(this[this.length++]=a),this},trim:function(){if(arguments.length){var a,d,b=this.length,c=(new j).merge(arguments),e=c.length,f=[];for(a=0;b>a;a++)for(d=0;e>d;d++)if(this[a]===c[d]){f.push(a);break}for(var g=f.length;g--;)Array.prototype.splice.call(this,f[g],1)}else for(;this.length;)delete this[this.length--];return this},remove:function(){for(var a,b=this.length;b--;)(a=this[b]).parentNode&&a.parentNode.removeChild(a);return this},clone:function(){return(new j).merge(this)},merge:function(){for(var b,c,d,a=-1;c=arguments[++a];)if(c instanceof j)for(b=c.length-1,d=-1;d++<b;)this.add(arguments[a][d]);else if(c.length>-1)for(b=c.length-1,d=-1;d++<b;)this.merge(arguments[a][d]);else this.add(c);return this},get:function(a){return(new j).add(this[a])},contains:function(a){for(var b=this.length;b--;)if(a===this[b])return!0;return!1},first:function(){return this.get(0)},last:function(){return this.get(this.length-1)},element:function(){return this[0]},elements:function(){for(var a=[],b=this.length-1,c=-1;c++<b;)a.push(this[c]);return a},each:function(a){for(var b=this.length-1,c=-1;c++<b;)a.call(this[c],this[c],c);return this},parent:function(){for(var a=new j,b=this.length-1,c=-1;c++<b;)a.add(this[echo(c)].parentNode);return a},children:function(){for(var c,d,e,a=new j,b=this.length-1,f=-1;f++<b;)for(e=this[f],c=-1,d=e.childNodes.length;c++<d;)a.add(e.childNodes[c]);return a},next:c?function(){for(var a=new j,b=this.length-1,c=-1;c++<b;)a.add(this[c].nextElementSibling);return a}:function(){for(var c,a=new j,b=this.length-1,d=-1;d++<b;){c=this[d];do c=c.nextSibling;while(c&&c.nodeType!==e);a.add(c)}return a},previous:c?function(){for(var a=new j,b=this.length-1,c=-1;c++<b;)a.add(this[c].previousElementSibling);return a}:function(){for(var c,a=new j,b=this.length-1,d=-1;d++<b;){c=this[d];do c=c.previousSibling;while(c&&c.nodeType!==e);a.add(c)}return a},query:function(a){for(var b=new j,c=this.length-1,d=-1;d++<c;)i(this[d],b,a);return b},type:function(){if(!this.length)return"";for(var b,c,a=this.length;a--;){if(b=this[a],c&&b.tagName!==c)return"*";c=b.tagName}return c.toLowerCase()},outer:function(a){var b=this.length-1,c=-1;if(null==a||a===!0){if(-1===b)return null;for(var d=[];c++<b;)d.push(this[c].outerHTML);return a===!0?d:d.join("")}if("string"==typeof a)for(;c++<b;)this[c].outerHTML=a;else if(a.nodeType===e)for(;c++<b;)this[c].outerHTML=a.outerHTML;else if(a instanceof j)for(;c++<b;)this[c].outerHTML=a.outer();else for(;c++<b;)this[c].outerHTML=a.toString();return this},inner:function(a){var b=this.length-1,c=-1;if(null==a||a===!0){if(-1===b)return null;for(var d=[];c++<b;)d.push(this[c].innerHTML);return a===!0?d:d.join("")}if("string"==typeof a)for(;c++<b;)this[c].innerHTML=a;else if(a.nodeType===e)for(;c++<b;)this[c].innerHTML=a.outerHTML;else if(a instanceof j)for(;c++<b;)this[c].innerHTML=a.outer();else for(;c++<b;)this[c].innerHTML=a.toString();return this},empty:function(){return this.inner(""),this},append:function(a){var b=this.length-1,c=-1;if("string"==typeof a)for(;c++<b;)this[c].insertAdjacentHTML("beforeend",a);else{var d=this[b];if(a.nodeType===e)d.appendChild(a);else if(a instanceof j)for(b=a.length-1;c++<b;)d.appendChild(a[c])}return this},appendTo:function(a){return b(a).append(this),this},prepend:function(a){var b=this.length-1,c=-1;if("string"==typeof a)for(;c++<b;)this[c].insertAdjacentHTML("afterbegin",a);else{var d=this[b];if(a.nodeType===e)d.insertBefore(a,d.firstChild);else if(a instanceof j)for(c=a.length;c--;)d.insertBefore(a[c],d.firstChild)}return this},prependTo:function(a){return b(a).prepend(this),this},before:function(a){var b=this.length-1,c=-1;if("string"==typeof a)for(;c++<b;)this[c].insertAdjacentHTML("beforebegin",a);else{var d=this[b];if(a.nodeType===e)d.parentNode.insertBefore(a,d);else if(a instanceof j)for(c=a.length;c--;)d.parentNode.insertBefore(a[c],d)}return this},after:function(a){var b=this.length-1,c=-1;if("string"==typeof a)for(;c++<b;)this[c].insertAdjacentHTML("afterend",a);else{var d=this[b];if(a.nodeType===e)d.parentNode.insertBefore(a,d.nextSibling);else if(a instanceof j)for(c=a.length;c--;)d.parentNode.insertBefore(a[c],d.nextSibling)}return this},text:function(a){var b=this.length-1,c=-1;if("string"!=typeof a){if(-1===b)return null;for(var d=[];c++<b;)d.push(this[c].innerText);return a===!0?d:d.join("")}for(;c++<b;)this[c].innerText=a;return this},attr:function(a,b){var c=this.length-1,d=-1;if(!a)return c>-1?g(this[0].attributes):null;if(a===!0){for(var e=[];d++<c;)e.push(g(this[d].attributes));return e}if("string"==typeof a){if(void 0===b)return c>-1?this[0].getAttribute(a):null;if(null===b)for(;d++<c;)this[d].removeAttribute(a);else for(;d++<c;)this[d].setAttribute(a,b)}else if("object"==typeof a)for(;d++<c;)for(var f in a)null===a[f]?this[d].removeAttribute(f):this[d].setAttribute(f,a[f]);return this},id:function(a){if(!a)return this.length?this[0].getAttribute("id"):null;if(a===!0){for(var b=-1,c=this.length-1,d=[];b++<c;)d.push(this[b].getAttribute("id"));return d}return this.length&&this[0].setAttribute("id",a.toString()),this},cl:function(a,b){if(!a)return this.length?this[0].getAttribute("class"):null;var c=this.length-1,d=-1;if(a===!0){for(var e=[];d++<c;)e.push(this[d].getAttribute("class"));return e}if("string"==typeof a){if(null==b)return this.length?h(this[0],"c",a):null;if(b===!0)for(;d++<c;)h(this[d],"a",a);else if(b===!1)for(;d++<c;)h(this[d],"r",a);else if("toggle"===b)for(;d++<c;)h(this[d],"t",a)}else if("object"==typeof a)for(var f in a)this.cl(f,a[f]);return this},style:function(a,b){if(!a)return this.length?this[0].getAttribute("style"):null;var c=this.length-1,d=-1;if(a===!0){for(var e=[];d++<c;)e.push(this[d].getAttribute("style"));return e}if("string"==typeof a){if(void 0===b)return c>-1?this[0].style[a]:null;if(null===b)for(;d++<c;)this[d].style[a]="";else for(;d++<c;)this[d].style[a]=b}else if("object"==typeof a)for(;d++<c;)for(var f in a)this[d].style[f]=null===a[f]?"":a[f];return this},show:function(){this.style("display","")},hide:function(){this.style("display","none")},on:c?function(a,b){for(var c=this.length;c--;)this[c].addEventListener(a,b,!1);return this.events[a]=b,this}:function(a,b){for(var c=this.length,d=function(){var a=window.event;return b.call(this,f(a,{target:a.srcElement||document,currentTarget:this,preventDefault:function(){a.returnValue=!1},stopPropagation:function(){a.cancelBubble=!0}}))};c--;)this[c].attachEvent("on"+a,d);return this.events[a]=d,this},off:c?function(a,b){for(var c=this.length;c--;)this[c].removeEventListener(a,b||this.events[a],!1);return delete this.events[a],this}:function(a,b){for(var c=this.length;c--;)this[c].detachEvent("on"+a,b||this.events[a]);return delete this.events[a],this},focus:function(){for(var a=this.length;a--;)this[a].focus();return this},blur:function(){for(var a=this.length;a--;)this[a].blur();return this},bounds:function(a){if(!this.length)return null;var d,b=this.length-1;if(a===!0){for(var e=-1,f=[];e++<b;)d=this[e].getBoundingClientRect(),c?f.push(d):f.push({top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.right-d.left,height:d.bottom-d.top});return f}if(a===!1){d=this[b].getBoundingClientRect();for(var g=d.top,h=d.right,i=d.bottom,b=d.left;b--;)d=this[b].getBoundingClientRect(),d.top<g&&(g=d.top),d.right>h&&(h=d.right),d.bottom>i&&(i=d.bottom),d.left<b&&(b=d.left);return{top:g,right:h,bottom:i,left:b,width:h-b,height:i-g}}return d=this[0].getBoundingClientRect(),c?d:{top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.right-d.left,height:d.bottom-d.top}}}}),b=a.domes=function(a){return"string"==typeof a?b.query.apply(b,arguments):b.gather.apply(b,arguments)},f(b,{fn:j.prototype,create:function(a,b){var c=new j;if(a)if(b)c.add(document.createElementNS(b,a));else switch(a){case"svg":c.add(document.createElementNS("http://www.w3.org/2000/svg",a));break;default:c.add(document.createElement(a))}return c},gather:function(){return(new j).merge(arguments)},query:function(a){return i(document,new j,a)},ready:function(a){c?document.addEventListener("DOMContentLoaded",function(){a()},!1):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&a()})}})}(window);